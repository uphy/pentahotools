box: tcnksm/gox

build:
  # The steps that will be executed on build
  # Steps make up the actions in your pipeline
  # Read more about steps on our dev center:
  # http://devcenter.wercker.com/docs/steps/index.html
  steps:
    # Sets the go workspace and places you package
    # at the right place in the workspace tree
    - setup-go-workspace:
        package-dir: github.com/uphy/pentahotools

    # Gets the dependencies
    - script:
        name: go get
        code: |
          go get
    - tcnksm/gox
    - tcnksm/zip:
        input: $WERCKER_OUTPUT_DIR/pkg
        output: $WERCKER_OUTPUT_DIR/dist

deploy:
  steps:
    - tcnksm/ghr:
        token: $GITHUB_TOKEN
        input: dist
        replace: true